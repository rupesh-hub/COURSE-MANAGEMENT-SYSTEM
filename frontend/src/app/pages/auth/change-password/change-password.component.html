<div class="bg-cream min-h-screen flex items-center justify-center font-sans">
  <div class="w-full max-w-md px-4">
    <div class="bg-white rounded-lg shadow-md p-8">
      <!-- Header -->
      <div class="mb-8">
        <div class="text-4xl text-sage mb-4"><i class="fas fa-lock"></i></div>
        <h1 class="text-3xl font-bold text-sage-dark mb-2">Change Password</h1>
        <p class="text-sage text-sm">Update your password to keep your account secure</p>
      </div>

      <!-- Form -->
      <form class="space-y-5 mb-6" #ChangePasswordForm="ngForm">

        <div>
          <label class="block text-sage-dark text-sm font-medium mb-2">
            <i class="fas fa-lock text-sage mr-2"></i>Current Password
          </label>
          <div class="relative">
            <i class="fas fa-key absolute left-3 top-3 text-sage/50"></i>
            <input type="password" placeholder="••••••••"
                   class="w-full px-4 py-2.5 pl-10 pr-10 border border-sage-light rounded-lg text-sage-dark placeholder-sage/60 focus:outline-none focus:border-sage focus:ring-2 focus:ring-sage/20 transition"
                   id="currentPassword"
                   name="currentPassword"
                   #currentPassword="ngModel"
                   [(ngModel)]="changePasswordRequest.currentPassword"
                   required
            >
            <button type="button" class="absolute right-3 top-3 text-sage/50 hover:text-sage transition">
              <i class="fas fa-eye" id="toggleCurrent"></i>
            </button>
          </div>

          <div *ngIf="currentPassword.invalid && currentPassword.touched" class="error-message">
            <small *ngIf="currentPassword.errors?.['required']">
              * Current password is required.
            </small>
          </div>
        </div>

        <div>
          <label class="block text-sage-dark text-sm font-medium mb-2">
            <i class="fas fa-lock text-sage mr-2"></i>New Password
          </label>
          <div class="relative">
            <i class="fas fa-lock absolute left-3 top-3 text-sage/50"></i>
            <input type="password" placeholder="••••••••"
                   class="w-full px-4 py-2.5 pl-10 pr-10 border border-sage-light rounded-lg text-sage-dark placeholder-sage/60 focus:outline-none focus:border-sage focus:ring-2 focus:ring-sage/20 transition"
                   id="newPassword"
                   name="newPassword"
                   [(ngModel)]="changePasswordRequest.newPassword"
                   #newPassword="ngModel"
                   required
                   cmsPasswordValidator
                   (ngModelChange)="confirmNewPassword.control.updateValueAndValidity()"
            >
            <button type="button" class="absolute right-3 top-3 text-sage/50 hover:text-sage transition">
              <i class="fas fa-eye" id="toggleNew"></i>
            </button>
          </div>

          <div *ngIf="newPassword.touched && newPassword.invalid" class="error-message">
            <small *ngIf="newPassword.errors?.['required']">
              * New password is required.
            </small>
            <small *ngIf="newPassword.errors?.['passwordStrength']">
              * Require at least 8 chars, 1 number, 1 uppercase.
            </small>
          </div>
        </div>

        <div>
          <label class="block text-sage-dark text-sm font-medium mb-2">
            <i class="fas fa-lock text-sage mr-2"></i>Confirm New Password
          </label>
          <div class="relative">
            <i class="fas fa-lock absolute left-3 top-3 text-sage/50"></i>
            <input type="password" placeholder="••••••••"
                   class="w-full px-4 py-2.5 pl-10 pr-10 border border-sage-light rounded-lg text-sage-dark placeholder-sage/60 focus:outline-none focus:border-sage focus:ring-2 focus:ring-sage/20 transition"
                   id="confirmNewPassword"
                   name="confirmNewPassword"
                   [(ngModel)]="changePasswordRequest.confirmNewPassword"
                   #confirmNewPassword="ngModel"
                   [required]="newPassword.valid && newPassword.touched"
                   cmsPasswordMatchValidator="newPassword"
            >
            <button type="button" class="absolute right-3 top-3 text-sage/50 hover:text-sage transition">
              <i class="fas fa-eye" id="toggleConfirm"></i>
            </button>
          </div>
          <div *ngIf="confirmNewPassword.touched && confirmNewPassword.invalid" class="error-message">
            <small *ngIf="confirmNewPassword.errors?.['required']">
              * Confirm new password is required.
            </small>
            <small *ngIf="confirmNewPassword.errors?.['mismatch']">
              * New password and confirm new password is not matching.
            </small>
          </div>
        </div>

        <button type="submit"
                class="w-full py-2.5 bg-sage text-white font-medium rounded-lg hover:bg-sage-dark transition flex items-center justify-center gap-2"
                (click)="onSubmit()"
                [disabled]="ChangePasswordForm.invalid">
          <i class="fas fa-save"></i>Update Password
        </button>
      </form>

      <!-- Footer -->
      <div class="text-center border-t border-sage-light/40 pt-6">
        <a routerLink="/auth/login"
           class="text-sage-dark font-medium hover:underline text-sm flex items-center justify-center gap-2">
          <i class="fas fa-arrow-left"></i>Back to Login
        </a>
      </div>
    </div>
  </div>
</div>
